---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getHashnodePosts } from "../lib/hashnode";
import { getMediumPosts } from "../lib/medium";

const hashnodePosts = await getHashnodePosts();
const mediumPosts = await getMediumPosts();
---

<BaseLayout title="Blogs | Sree Surya">
  <h1>Blogs & Articles</h1>

  <p>
    I write about cloud security, detection engineering, SOC automation,
    and AWS security architecture.
  </p>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:3rem;margin-top:3rem;">

    <!-- Hashnode Column -->
    <section>
      <h2>Hashnode Â· Friday Security</h2>

      <ul>
        {
          hashnodePosts.length === 0
            ? <li>No Hashnode posts found.</li>
            : hashnodePosts.map((post) => {
                return (
                  <li style="margin-bottom:1.2rem;">
                    <a href={post.url} target="_blank" rel="noopener noreferrer">
                      {post.title}
                    </a>
                    <div style="color:#94a3b8;font-size:0.85rem;">
                      {new Date(post.date).toDateString()}
                    </div>
                  </li>
                );
              })
        }
      </ul>
    </section>

    <!-- Medium Column -->
    <section>
      <h2>Medium</h2>

      <ul>
        {
          mediumPosts.length === 0
            ? <li>No Medium posts found.</li>
            : mediumPosts.map((post) => {
                return (
                  <li style="margin-bottom:1.2rem;">
                    <a href={post.url} target="_blank" rel="noopener noreferrer">
                      {post.title}
                    </a>
                    <div style="color:#94a3b8;font-size:0.85rem;">
                      {new Date(post.date).toDateString()}
                    </div>
                  </li>
                );
              })
        }
      </ul>
    </section>

  </div>

  <style>
    @media (max-width: 768px) {
      div[style*="grid-template-columns"] {
        grid-template-columns: 1fr;
      }
    }
  </style>
</BaseLayout>
